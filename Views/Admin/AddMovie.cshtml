@{
    ViewBag.Title = "AddMovie";
    Layout = "~/Views/Admin/Admin_Panel.cshtml";
}

<h3 class="page-header">Add Movie</h3>




@*<style>
        @@media screen and (min-device-width: 800px) and (max-device-width: 2000px) {
            /* STYLES HERE */
            #movieForm{
                width:50%;
            }
        }
    </style>*@

<div class="col-sm-6">
    @if (Model != null)
    {
        <h1>Model</h1>
    }
    
    <form id="movieForm" onsubmit="return validate();" action="/Admin/AddMovieFunction" method="post" enctype="multipart/form-data">

        <div class="form-group">
            <label for="exampleInputEmail1">Movie Id</label>
            <input type="number" class="form-control" id="movieId" value="@ViewBag.thisMovieId" name="movieId" placeholder="It will be generated by database" readonly>
        </div>

        <div class="form-group">
            <label for="exampleInputEmail1">Movie Name</label>
            <input type="text" class="form-control" id="movieName" name="movieName" placeholder="Enter movie name">
        </div>

        <div class="form-group">
            <label for="exampleInputEmail1">Genre</label>
            <input type="text" class="form-control" id="movieGenre" name="movieGenre" placeholder="Enter movie genre">
        </div>

        <div class="form-group">
            <label for="exampleInputEmail1">Director</label>
            <input type="text" class="form-control" id="movieDirector" name="movieDirector" placeholder="Enter movie director name">
        </div>

        <div class="form-group">
            <label for="exampleInputEmail1">Language</label>
            <select name="movieLanguage" class="form-control">
                <option>Hindi</option>
                <option>English</option>
                <option>Urdu</option>
                <option>Chinese</option>
            </select>
        </div>

        <script>
            $(function () {
                $("#movieReleaseDate").datepicker();
            });
        </script>
        <div class="form-group">
            <label for="exampleInputEmail1">Release Date</label>
            <input type="text" class="form-control" id="movieReleaseDate" name="movieReleaseDate" placeholder="Enter movie realese date">
        </div>

        <div class="form-group">
            <label for="exampleInputEmail1">Cast</label>
            <input type="text" class="form-control" id="movieCast" name="movieCast" placeholder="Enter movie actors,actresses name">
        </div>


        <div class="form-group">
            <label for="exampleInputEmail1">Duration</label>
            <input type="text" class="form-control" id="movieDuration" name="movieDuration" placeholder="Enter movie duration">
        </div>

        <div class="form-group">
            <label for="exampleInputEmail1">Synopsis</label>
            <textarea class="form-control" rows="3" name="movieSynopsis" id="movieSynopsis" placeholder="Provide a small summary of this movie"></textarea>
        </div>

        <div class="form-group">
            <label for="exampleInputFile">Movie Banner (1200x400)</label>
            <input type="file" name="movieBanner" id="movieBanner">
        </div>


        <div class="form-group">
            <label for="exampleInputFile">Movie Thumbnail (140x180)</label>
            <input type="file" name="movieThumbnail" id="movieThumbnail">
        </div>

        <div class="alert alert-danger" id="errorDivAddMovie" style="visibility:collapse;">

        </div>
        <input type="submit" class="btn btn-success" style="float:right">
    </form>
    <br /><br /><br />
</div>

<script>
    function validate() {
        var movieName = document.getElementById('movieName').value;
        var movieGenre = document.getElementById('movieGenre').value;
        var movieDirector = document.getElementById('movieDirector').value;
        var movieReleaseDate = document.getElementById('movieReleaseDate').value;
        var movieCast = document.getElementById('movieCast').value;
        var movieDuration = document.getElementById('movieDuration').value;
        var movieSynopsis = document.getElementById('movieSynopsis').value;

        var errorDiv = document.getElementById('errorDivAddMovie');


        if (movieName == "" || movieGenre == "" || movieDirector == "" || movieReleaseDate == "" || movieReleaseDate == "" || movieCast == "" || movieDuration == "" || movieSynopsis == "") {
            errorDiv.innerHTML = "Please fill all the fields.";
            errorDiv.style.visibility = "visible";
            return false;
        }

        //check for file extension

        var movieBanner = document.getElementById('movieBanner').value;
        var movieThumbnail = document.getElementById('movieThumbnail').value;

        if (movieBanner == "") {
            errorDiv.innerHTML = "please select movie banner image";
            errorDiv.style.visibility = "visible";
            errorDiv.focus();
            return false;
        }

        if (movieThumbnail == "") {
            errorDiv.innerHTML = "please select movie thumbnail image";
            errorDiv.style.visibility = "visible";
            errorDiv.focus();
            return false;
        }


        var y = movieBanner.substring(movieBanner.indexOf(".") + 1);
        var z = movieThumbnail.substring(movieThumbnail.indexOf(".") + 1);

        

        if (!(y == "jpg" || y == "jpeg" || y == "png" || y == "gif")) {
            errorDiv.innerHTML = "Invalid Movie banner image selected";
            errorDiv.style.visibility = "visible";
            return false;
        }


        
        if (!(z == "jpg" || y == "jpeg" || y == "png" || y == "gif")) {
            errorDiv.innerHTML = "Invalid Movie thumbnail image selected";
            errorDiv.style.visibility = "visible";
            return false;
        }

    }
</script>